<h2 id="1000" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">概述</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h2><h2 id="1001" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">安装</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h2><h2 id="1002" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">语法</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h2><h3 id="1003" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">图像</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h3><p><span class="inline-code">Mat</span> 表示图片的矩阵。</p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre><span class="token comment">// 创建一个与src大小和类型相同的dst</span>
dst<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> src<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 清零dst</span>
dst <span class="token operator">=</span> Scalar<span class="token operator">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div><p>读取图像</p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre>Mat image <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> flag<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 彩色</span>
image <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> CV_LOAD_IMAGE_COLOR<span class="token punctuation">)</span><span class="token punctuation">;</span>
image <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 灰度</span>
image <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> CV_LOAD_IMAGE_GRAYSCALE<span class="token punctuation">)</span><span class="token punctuation">;</span>
image <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 原始图片</span>
image <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> CV_LOAD_IMAGE_UNCHANGED<span class="token punctuation">)</span><span class="token punctuation">;</span>
image <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div><p>显示图片</p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre><span class="token comment">// 显示窗口</span>
<span class="token function">imshow</span><span class="token punctuation">(</span>window_name<span class="token punctuation">,</span> image<span class="token punctuation">)</span><span class="token punctuation">;</span>

</pre></div><p><span class="inline-code">imwrite</span> 保存图片。</p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre><span class="token function">imwrite</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> image<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div><h3 id="1004" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">颜色转换</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h3><div class="code" language="c">
              <div class="code-header">c</div>
              <pre><span class="token comment">// 灰度</span>
<span class="token function">cvtColor</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> gray_image<span class="token punctuation">,</span> CV_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div><h3 id="1005" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">阈值、二值化</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h3><p><span class="inline-code">threshold(image, threshold_image, threshold, maxvalue, threshold_type)</span></p><p><span class="inline-code">threshold</span> 表示阈值，<span class="inline-code">maxvalue</span> 表示阈值后的像素值，<span class="inline-code">threshold_type</span> 表示阈值类型。</p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre><span class="token comment">// 二值化,大于127的像素值为255，小于等于127的像素值为0</span>
<span class="token function">threshold</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> threshold_image<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> CV_THRESH_BINARY<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">threshold</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> threshold_image<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 反二值化,大于127的像素值为0，小于等于127的像素值为255</span>
<span class="token function">threshold</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> threshold_image<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> CV_THRESH_BINARY_INV<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">threshold</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> threshold_image<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 削峰阈值化,大于127的像素值为127，小于等于127的像素值不变</span>
<span class="token function">threshold</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> threshold_image<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> CV_THRESH_TRUNC<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">threshold</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> threshold_image<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 归零阈值化,大于127的像素值不变，小于等于127的像素值为0</span>
<span class="token function">threshold</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> threshold_image<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> CV_THRESH_TOZERO<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">threshold</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> threshold_image<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 反归零阈值化,大于127的像素值为0，小于等于127的像素值不变</span>
<span class="token function">threshold</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> threshold_image<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> CV_THRESH_TOZERO_INV<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">threshold</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> threshold_image<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</pre></div><h3 id="1006" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">窗口</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h3><p><span class="inline-code">namedWindow</span> 创建窗口。</p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre><span class="token function">namedWindow</span><span class="token punctuation">(</span>window_name<span class="token punctuation">,</span> flag<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 窗口大小可调</span>
<span class="token function">namedWindow</span><span class="token punctuation">(</span>window_name<span class="token punctuation">,</span> CV_WINDOW_NORMAL<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 窗口大小不可调</span>
<span class="token function">namedWindow</span><span class="token punctuation">(</span>window_name<span class="token punctuation">,</span> CV_WINDOW_AUTOSIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 销毁窗口</span>
<span class="token function">destroyWindow</span><span class="token punctuation">(</span>window_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div><h3 id="1007" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">退出</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h3><p><span class="inline-code">waitKey</span> 函数等待键盘输入。</p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> c<span class="token punctuation">;</span>
    <span class="token comment">// 每20毫秒检查一次键盘是否有输入</span>
	c <span class="token operator">=</span> <span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果检测到输入的是ESC键（ASCII码为27）</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>c <span class="token operator">==</span> <span class="token number">27</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></div><h3 id="1008" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">滑块</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h3><p><span class="inline-code">createTrackbar</span> 函数创建滑块。</p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre><span class="token comment">// 滑块名称、窗口名称、滑块值、最大值、回调函数</span>
<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"trackbar"</span><span class="token punctuation">,</span> window_name<span class="token punctuation">,</span> <span class="token operator">&amp;</span>value<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> on_trackbar<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">on_trackbar</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>   
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"value: "</span> <span class="token operator">&lt;&lt;</span> value <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></div><h3 id="1009" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">边缘</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h3><h4 id="1010" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">Sobel</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h4><p><span class="inline-code">Sobel</span> 函数计算图像的梯度。</p><p><span class="inline-code">Sobel(src, dst, ddepth, dx, dy, kenel_size, scale, delta, borderType)</span></p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre><span class="token comment">// x方向梯度</span>
<span class="token function">Sobel</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> CV_16S<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> BORDER_DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// y方向梯度</span>
<span class="token function">Sobel</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> CV_16S<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> BORDER_DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 转换为8位无符号整数，对应0-255</span>
<span class="token function">convertScaleAbs</span><span class="token punctuation">(</span>dst<span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 合并梯度</span>
<span class="token function">addWeighted</span><span class="token punctuation">(</span>abs_grad_x<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> abs_grad_y<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> grad<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div><h4 id="1011" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">Scharr</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h4><p><span class="inline-code">Scharr</span> 函数计算图像的梯度。</p><p><span class="inline-code">Scharr(src, dst, ddepth, dx, dy, scale, delta, borderType)</span></p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre><span class="token comment">// x方向梯度</span>
<span class="token function">Scharr</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> CV_16S<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> BORDER_DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// y方向梯度</span>
<span class="token function">Scharr</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> CV_16S<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> BORDER_DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 转换为8位无符号整数，对应0-255</span>
<span class="token function">convertScaleAbs</span><span class="token punctuation">(</span>dst<span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 合并梯度</span>
<span class="token function">addWeighted</span><span class="token punctuation">(</span>abs_grad_x<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> abs_grad_y<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> grad<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div><h4 id="1012" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">Laplacian</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h4><p><span class="inline-code">Laplacian</span> 函数计算图像的 laplacian。</p><p><span class="inline-code">Laplacian(src, dst, ddepth, ksize, scale, delta, borderType)</span></p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre><span class="token comment">// 3x3</span>
<span class="token function">Laplacian</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> CV_16S<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> BORDER_DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 转换为8位无符号整数，对应0-255</span>
<span class="token function">convertScaleAbs</span><span class="token punctuation">(</span>dst<span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div><h4 id="1013" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">Canny</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h4><p><span class="inline-code">Canny</span> 函数计算图像的 canny。</p><p><span class="inline-code">Canny(src, dst, threshold1, threshold2, apertureSize, L2gradient)</span></p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre><span class="token function">Canny</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// copyTo()函数只会将源图像src中对应掩码元素值非零（True）的位置的像素复制到目标图像dst中。</span>
<span class="token comment">// 掩码元素值为0（False）的位置，目标图像dst保持不变。</span>
src<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>dst<span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div><h3 id="1014" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">模糊</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h3><p><span class="inline-code">blur(src, dst, ksize, anchor, borderType )</span></p><p><span class="inline-code">GaussianBlur(src, dst, ksize, sigmaX, sigmaY, borderType)</span></p><p><span class="inline-code">medianBlur(src, dst, ksize)</span></p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre><span class="token function">blur</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> BORDER_DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">blur</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">GaussianBlur</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> BORDER_DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div><h3 id="1015" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">模版匹配</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h3><p><span class="inline-code">matchTemplate(src, templ, result, method, mask)</span></p><p><span class="inline-code">minMaxLoc(src, minVal, maxVal, minLoc, maxLoc, mask)</span></p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre>
</pre></div><h3 id="1016" class="title"><span class="title-hide">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon right-triangle">
<path d="M3 8L12 17L21 8"></path>
</svg></span><span class="bold">视频</span><span class="title-lock">
<svg xmlns="http://www.w3.org/2000/svg" 
width="24" height="24" viewBox="0 0 24 24" fill="none" 
stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="svg-icon lucide-link">
<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
<path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></span></h3><p><span class="inline-code">VideoCapture(src)</span> </p><p><span class="inline-code">VideoWriter(filename, fourcc, fps, frameSize, isColor)</span></p><p><span class="inline-code">VideoCapture::read(frame)</span></p><p><span class="inline-code">VideoWriter::write(frame)</span></p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre><span class="token comment">// 打开编号为 0 的摄像头</span>
VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 打开失败就结束程序</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cap<span class="token punctuation">.</span><span class="token function">isOpened</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"无法启动摄像头"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">namedWindow</span><span class="token punctuation">(</span>windowName<span class="token punctuation">,</span> CV_WINDOW_AUTOSIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 循环读取帧</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Mat frame<span class="token punctuation">;</span>
	<span class="token comment">// 从摄像头读取帧 (frame)</span>
	bool bSuccess <span class="token operator">=</span> cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 检查是否读取成功</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>bSuccess<span class="token punctuation">)</span><span class="token punctuation">{</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"无法从摄像头读取帧"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 显示读取的帧</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span>windowName<span class="token punctuation">,</span> frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 等待10毫秒判断是否按键</span>
	<span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">// Esc键被按下(Esc ASCII 的值是 27)</span>
		<span class="token keyword">case</span> <span class="token number">27</span><span class="token operator">:</span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></div><p>写入视频</p><div class="code" language="c">
              <div class="code-header">c</div>
              <pre>VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取得图像帧(frames) 大小</span>
Size S <span class="token operator">=</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>cap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>CV_CAP_PROP_FRAME_WIDTH<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>cap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>CV_CAP_PROP_FRAME_HEIGHT<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
VideoWriter <span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"D:\\output.mpg"</span><span class="token punctuation">,</span><span class="token function">CV_FOURCC</span><span class="token punctuation">(</span><span class="token char">'M'</span><span class="token punctuation">,</span> <span class="token char">'P'</span><span class="token punctuation">,</span> <span class="token char">'E'</span><span class="token punctuation">,</span> <span class="token char">'G'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> S<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>put<span class="token punctuation">.</span><span class="token function">isOpened</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"无法产生视频文件"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">(</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token char">'q'</span> <span class="token operator">&amp;&amp;</span> cap<span class="token punctuation">.</span><span class="token function">isOpened</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	Mat frame<span class="token punctuation">;</span>
	cap <span class="token operator">>></span> frame<span class="token punctuation">;</span>
	<span class="token comment">// 检查摄像头是否结束拍摄</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>frame<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 将帧写入视频</span>
	put <span class="token operator">&lt;&lt;</span> frame<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre></div>